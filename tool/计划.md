# ç°æœ‰è®¡åˆ’

ä½ ç°åœ¨æƒ³æŸ¥çœ‹æ¨¡å‹åœ¨**æ’åºä»»åŠ¡ï¼ˆranking taskï¼‰**ä¸­çš„è¡¨ç°ï¼Œè¿™éå¸¸é‡è¦ï¼Œç‰¹åˆ«æ˜¯åƒè¯ç‰©ç­›é€‰ã€åˆ†å­æ‰“åˆ†è¿™ç§åœºæ™¯ï¼Œå³ä½¿é¢„æµ‹å€¼ä¸å®Œç¾ï¼Œ**æ’åºæ­£ç¡®ä¹Ÿèƒ½å¸¦æ¥é«˜ä»·å€¼**ã€‚

ä¸‹é¢æ˜¯ä½ è®­ç»ƒå¥½ä¸€ä¸ªå›å½’æ¨¡å‹åï¼Œ**è¯„ä¼°å…¶æ’åºèƒ½åŠ›çš„æ ‡å‡†æµç¨‹**ï¼š

---

## âœ… 1. æ˜ç¡®æ’åºç›®æ ‡ï¼šè°å¯¹è°æ’åºï¼Ÿ

ä½ éœ€è¦å‘Šè¯‰æ¨¡å‹åœ¨åšä»€ä¹ˆæ ·çš„æ’åºï¼Œæ¯”å¦‚ï¼š

| åˆ†å­ID | è›‹ç™½ID | é¢„æµ‹å€¼ | æ’åºç›®æ ‡   |
|--------|--------|--------|------------|
| Mol1   | P12345 | 7.3    | é«˜åˆ†æ’å‰é¢ |
| Mol2   | P12345 | 5.2    |            |
| Mol3   | P12345 | 6.1    |            |

**å¸¸è§çš„æ’åºå•ä½**æ˜¯â€œä»¥ä¸€ä¸ªè›‹ç™½ä¸ºå•ä½ï¼Œå¯¹å¤šä¸ªåˆ†å­æ’åºâ€ã€‚

---

## âœ… 2. ä½¿ç”¨æ’åºç›¸å…³æŒ‡æ ‡æ¥è¯„ä¼°æ¨¡å‹

è¿™äº›æ˜¯æ’åºä»»åŠ¡ä¸­å¸¸ç”¨çš„è¯„ä»·æŒ‡æ ‡ ğŸ‘‡

| æŒ‡æ ‡å        | å«ä¹‰è¯´æ˜ |
|---------------|----------|
| **Spearman Ï**ï¼ˆæ–¯çš®å°”æ›¼ç›¸å…³ç³»æ•°ï¼‰ | è¡¡é‡é¢„æµ‹æ’åä¸çœŸå®æ’åçš„ä¸€è‡´æ€§ï¼ˆæ’åºç›¸å…³ï¼‰ |
| **Kendall Ï„**ï¼ˆè‚¯å¾·å°”ç§©ç›¸å…³ç³»æ•°ï¼‰ | å¦ä¸€ç§è¡¡é‡æ’åä¸€è‡´æ€§çš„æŒ‡æ ‡ |
| **Top-k å‡†ç¡®ç‡**ï¼ˆPrecision@kï¼‰   | é¢„æµ‹å‰kä¸ªä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ˜¯çœŸæ­£çš„Topé¡¹ |
| **NDCG**ï¼ˆå½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Šï¼‰     | ç»¼åˆè€ƒè™‘æ’åºå’Œä½ç½®çš„ç»¼åˆæŒ‡æ ‡ï¼ˆå¸¸ç”¨äºæ¨èç³»ç»Ÿï¼‰ |

## âœ… 4. å¦‚æœä½ æœ‰åˆ†ç»„ï¼ˆå¦‚æŒ‰è›‹ç™½IDæ’åºï¼‰

ä½ éœ€è¦**å¯¹æ¯ç»„åˆ†åˆ«è¯„ä¼°**æ’åºèƒ½åŠ›ï¼Œä»£ç ç¤ºä¾‹ï¼š

```python
grouped = df.groupby("ProteinID")  # æŒ‰è›‹ç™½åˆ†ç»„

spearman_list = []
for name, group in grouped:
    if len(group) >= 2:  # è‡³å°‘ä¸¤ä¸ªæ‰æœ‰æ’å
        r, _ = spearmanr(group["true_score"], group["pred_score"])
        spearman_list.append(r)

avg_spearman = sum(spearman_list) / len(spearman_list)
print(f"å¹³å‡ Spearman æ’åºç›¸å…³æ€§: {avg_spearman:.4f}")
```

---

## âœ… 5. Bonusï¼šç»˜åˆ¶çœŸå® vs é¢„æµ‹æ’åºå›¾ï¼ˆå¯é€‰ï¼‰

```python
import matplotlib.pyplot as plt

plt.scatter(true_scores, pred_scores, alpha=0.5)
plt.xlabel("True Score")
plt.ylabel("Predicted Score")
plt.title("é¢„æµ‹å€¼ vs çœŸå®å€¼ï¼ˆæ’åºæ•£ç‚¹å›¾ï¼‰")
plt.grid(True)
plt.show()
```

---

## ğŸ”š æ€»ç»“ä½ è¯¥åšä»€ä¹ˆ

1. **ä¿å­˜éªŒè¯é›†é¢„æµ‹ç»“æœ**ï¼ˆåŒ…æ‹¬çœŸå®å€¼ã€é¢„æµ‹å€¼ã€åˆ†ç»„IDï¼‰
2. **ä½¿ç”¨ Spearman/Kendall/NDCG ç­‰æ’åºæŒ‡æ ‡æ¥è¯„ä¼°**
3. å¦‚æœæœ‰åˆ†ç»„ï¼ˆå¦‚è›‹ç™½IDï¼‰ï¼Œåº”æŒ‰ç»„è¯„ä¼°å†æ±‚å¹³å‡
4. ä¹Ÿå¯ä»¥ç”»å‡º **çœŸå®æ’å vs é¢„æµ‹æ’å** æ•£ç‚¹å›¾
